| ID | Category | Requirement Description | Implementation Notes |
| --- | --- | --- | --- |
| **REQ-VIS-01** | **Ingestion** | **Capture Line Numbers for Code**<br>

<br>Update `ASTParser` in `src/ingestion.py` to store `start_line` and `end_line` in the chunk metadata. | Currently, `ASTParser` extracts text but doesn't save the line numbers in the `metadata` dictionary. Add `node.lineno` and `node.end_lineno`. |
| **REQ-VIS-02** | **Backend** | **Serve Static Files**<br>

<br>Expose the `uploaded_files` directory via a local web server or Streamlit static mount so browsers can load them directly. | Streamlit can serve static files if placed in a `static` folder, or you can use `st.components.v1.iframe` with a local path helper. |
| **REQ-VIS-03** | **Database** | **Retrieve Path & Metadata**<br>

<br>Ensure `db.search_vectors` and `db.get_chunks_by_concepts` return the `file_path` and `metadata` (page/lines) along with the content. | Verify `src/database.py` selects the `metadata` column (already done in `store_chunks`) and joins with the `files` table to get the file path. |
| **REQ-VIS-04** | **UI / PDF** | **PDF Deep Linking**<br>

<br>In the "Retrieved Context" panel, add a "View PDF" button that opens the file to the specific page. | Use an iframe or `st.link_button` pointing to `path/to/file.pdf#page={page_number}`. |
| **REQ-VIS-05** | **UI / Code** | **Code Highlighting**<br>

<br>In the "Retrieved Context" panel, add a "View Code" button that opens the full file and highlights the relevant lines. | Since browsers don't natively deep-link code lines like PDFs, you may need to render the full file in a `st.code` block and programmatically scroll or highlight the specific lines. |
| **REQ-VIS-06** | **UI / UX** | **Visual Indicators**<br>

<br>Add an icon or button inside the existing `st.expander` for each source in `app.py` to trigger the visualization. | Modify the loop in `app.py` (lines 292-307) to include `st.button("üîç View in File", key=chunk_id)`. |