| ID | Requirement | Description | Acceptance Criteria |
| --- | --- | --- | --- |
| **REQ-POETIQ-01** | **Python Sandbox Tool** | A secure execution environment for Python code, adapted from `arc_agi/sandbox.py`. | Tool `python_interpreter(code)` exists in `ToolRegistry`. Returns `stdout` on success, `stderr` on failure. |
| **REQ-POETIQ-02** | **Reasoning Toggle** | A boolean flag (`reasoning_mode=True`) passed to the agent's `run` method. | If `False`, runs standard ReAct loop. If `True`, enters the new "Plan & Code" loop. |
| **REQ-POETIQ-03** | **Goal & Plan Phase** | Before coding, the model must explicitly state its plan and expected output format. | The system prompts the model to define: 1. Data needed (Context), 2. Goal, 3. Verification logic (e.g., "Output must be a non-empty list"). |
| **REQ-POETIQ-04** | **Iterative Coding Loop** | A feedback loop that attempts to fix code based on execution errors, similar to `solve_coding.py`. | If sandbox returns `stderr`, the agent automatically feeds it back to the LLM with a "Fix this error" prompt. Max 5 retries. |
| **REQ-POETIQ-05** | **Self-Verification** | The generated code must include assertions or print statements that confirm validity. | The prompt instructs the model to write code that prints the final answer to `stdout` and uses `assert` for intermediate checks. |